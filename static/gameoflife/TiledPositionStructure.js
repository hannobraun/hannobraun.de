(function(){function a(a){this.tileSize=a,this.length=0,this._tiles={}}a.prototype.push=function(a){var b=this.length;this.length+=1,this[b]=a;var c=this._toTile(a.x),d=this._toTile(a.y);this._tiles[c]==undefined&&(this._tiles[c]={}),this._tiles[c][d]==undefined&&(this._tiles[c][d]=[]),this._tiles[c][d].push(b)},a.prototype.concat=function(b){var c=new a(this.tileSize);for(var d=0;d<this.length;d++)c.push(this[d]);for(var d=0;d<b.length;d++)c.push(b[d]);return c},a.prototype.inSameTileAs=function(a){var b=this._toTile(a.x),c=this._toTile(a.y);return this._positionsAtTile(b,c)},a.prototype.inTilesCoveredBy=function(a,b){var c=this._toTile(a.x),d=this._toTile(a.y),e=this._toTile(b.x),f=this._toTile(b.y),g=[];for(var h=c;h<=e;h++)for(var i=d;i<=f;i++)g=g.concat(this._positionsAtTile(h,i));return g},a.prototype._toTile=function(a){return Math.floor(a/this.tileSize)},a.prototype._positionsAtTile=function(a,b){return this._tiles[a]==undefined||this._tiles[a][b]==undefined?[]:this._tiles[a][b]},typeof window=="undefined"?module.exports=a:register("gameoflife/TiledPositionStructure",a)})()